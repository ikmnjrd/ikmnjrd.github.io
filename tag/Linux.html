<!DOCTYPE html><html lang="ja"><head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Linuxの記事 | ikmnjrd.github.io</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/aae621b3e454cd71.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aae621b3e454cd71.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b7509a1ed00767f8.js" defer=""></script><script src="/_next/static/chunks/pages/tag/%5Btag%5D-80e7e41e84222631.js" defer=""></script><script src="/_next/static/5Flyn-MnMPFZhPCQn0UwW/_buildManifest.js" defer=""></script><script src="/_next/static/5Flyn-MnMPFZhPCQn0UwW/_ssgManifest.js" defer=""></script><script src="/_next/static/5Flyn-MnMPFZhPCQn0UwW/_middlewareManifest.js" defer=""></script></head><body class="dark:bg-newmo-800"><div id="__next" data-reactroot=""><div class="text-newmo-400 dark:text-newmo-100"><header><div class="mb-4 p-4 md:px-8 flex items-end justify-between"><h1 class="col-start-1 col-end-6"><a alt="Home" class="header-text md:text-5xl text-3xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/">ikmnjrd.github.io</a><button class="md:ml-3 ml-2" aria-label="Toggle Theme"><img width="24px" height="24px" class="svg-icon md:w-10 hover:opacity-50 active:opacity-30" src="/light_mode_white_24dp.svg" alt="Dark Mode Status is false" aria-hidden="true"/></button></h1><div class="col-start-6 col-end-7"><a alt="tag一覧" class="header-text md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/tags">Tags</a></div></div></header><main class="max-w-2xl md:mx-auto mx-4"><h2>Linux<!-- -->の投稿記事一覧</h2><div><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/novnc-kali-linux">kali linuxでVNCサーバーにnovncで接続する</a></li></div></main><footer class="text-center py-5 text-sm text-newmo-300" role="contentinfo"><p>©︎ikmnjrd - <time dateTime="Sun Feb 13 2022 09:56:23 GMT+0000 (Coordinated Universal Time)">2022</time></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"tag":"Linux","posts":[{"slug":"novnc-kali-linux","frontmatter":{"title":"kali linuxでVNCサーバーにnovncで接続する","date":"2021-10-31","tag":["Linux"]},"content":"[公式](https://www.kali.org/docs/general-use/novnc-kali-in-browser/)にやり方も書いてあるがこの通りだとエラーが出た。\n\n`$ sudo apt install -y x11vnc`\n\n以下の部分をそのまま実行するとエラーが出る。\n$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -ncache_cr-quiet -forever\n```bash\n31/10/2021 20:23:07 passing arg to libvncserver: -ncache_cr-quiet\n31/10/2021 20:23:07 x11vnc version: 0.9.16 lastmod: 2019-01-05  pid: 2173\n31/10/2021 20:23:07 Using X display :0\n31/10/2021 20:23:07 rootwin: 0x764 reswin: 0x3800001 dpy: 0x1dc24970\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 ------------------ USEFUL INFORMATION ------------------\n31/10/2021 20:23:07 X DAMAGE available on display, using it for polling hints.\n31/10/2021 20:23:07   To disable this behavior use: '-noxdamage'\n31/10/2021 20:23:07 \n31/10/2021 20:23:07   Most compositing window managers like 'compiz' or 'beryl'\n31/10/2021 20:23:07   cause X DAMAGE to fail, and so you may not see any screen\n31/10/2021 20:23:07   updates via VNC.  Either disable 'compiz' (recommended) or\n31/10/2021 20:23:07   supply the x11vnc '-noxdamage' command line option.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Wireframing: -wireframe mode is in effect for window moves.\n31/10/2021 20:23:07   If this yields undesired behavior (poor response, painting\n31/10/2021 20:23:07   errors, etc) it may be disabled:\n31/10/2021 20:23:07    - use '-nowf' to disable wireframing completely.\n31/10/2021 20:23:07    - use '-nowcr' to disable the Copy Rectangle after the\n31/10/2021 20:23:07      moved window is released in the new position.\n31/10/2021 20:23:07   Also see the -help entry for tuning parameters.\n31/10/2021 20:23:07   You can press 3 Alt_L's (Left \"Alt\" key) in a row to \n31/10/2021 20:23:07   repaint the screen, also see the -fixscreen option for\n31/10/2021 20:23:07   periodic repaints.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 XFIXES available on display, resetting cursor mode\n31/10/2021 20:23:07   to: '-cursor most'.\n31/10/2021 20:23:07   to disable this behavior use: '-cursor arrow'\n31/10/2021 20:23:07   or '-noxfixes'.\n31/10/2021 20:23:07 using XFIXES for cursor drawing.\n31/10/2021 20:23:07 GrabServer control via XTEST.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Scroll Detection: -scrollcopyrect mode is in effect to\n31/10/2021 20:23:07   use RECORD extension to try to detect scrolling windows\n31/10/2021 20:23:07   (induced by either user keystroke or mouse input).\n31/10/2021 20:23:07   If this yields undesired behavior (poor response, painting\n31/10/2021 20:23:07   errors, etc) it may be disabled via: '-noscr'\n31/10/2021 20:23:07   Also see the -help entry for tuning parameters.\n31/10/2021 20:23:07   You can press 3 Alt_L's (Left \"Alt\" key) in a row to \n31/10/2021 20:23:07   repaint the screen, also see the -fixscreen option for\n31/10/2021 20:23:07   periodic repaints.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Client Side Caching: -ncache mode is in effect to provide\n31/10/2021 20:23:07   client-side pixel data caching.  This speeds up\n31/10/2021 20:23:07   iconifying/deiconifying windows, moving and raising\n31/10/2021 20:23:07   windows, and reposting menus.  In the simple CopyRect\n31/10/2021 20:23:07   encoding scheme used (no compression) a huge amount\n31/10/2021 20:23:07   of extra memory (20-100MB) is used on both the server and\n31/10/2021 20:23:07   client sides.  This mode works with any VNC viewer.\n31/10/2021 20:23:07   However, in most you can actually see the cached pixel\n31/10/2021 20:23:07   data by scrolling down, so you need to re-adjust its size.\n31/10/2021 20:23:07   See http://www.karlrunge.com/x11vnc/faq.html#faq-client-caching.\n31/10/2021 20:23:07   If this mode yields undesired behavior (poor response,\n31/10/2021 20:23:07   painting errors, etc) it may be disabled via: '-ncache 0'\n31/10/2021 20:23:07   You can press 3 Alt_L's (Left \"Alt\" key) in a row to \n31/10/2021 20:23:07   repaint the screen, also see the -fixscreen option for\n31/10/2021 20:23:07   periodic repaints.\n31/10/2021 20:23:07 X FBPM extension not supported.\n31/10/2021 20:23:07 X display is capable of DPMS.\n31/10/2021 20:23:07 --------------------------------------------------------\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Default visual ID: 0x21\n31/10/2021 20:23:07 Read initial data from X display into framebuffer.\n31/10/2021 20:23:07 initialize_screen: fb_depth/fb_bpp/fb_Bpl 24/32/7680\n31/10/2021 20:23:07 *** unrecognized option(s) ***\n31/10/2021 20:23:07     [1]  -ncache_cr-quiet\n31/10/2021 20:23:07 For a list of options run: x11vnc -opts\n31/10/2021 20:23:07 or for the full help: x11vnc -help\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Here is a list of removed or obsolete options:\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 removed: -hints, -nohints\n31/10/2021 20:23:07 removed: -cursorposall\n31/10/2021 20:23:07 removed: -nofilexfer, now the default.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 renamed: -old_copytile, use -onetile\n31/10/2021 20:23:07 renamed: -mouse,   use -cursor\n31/10/2021 20:23:07 renamed: -mouseX,  use -cursor X\n31/10/2021 20:23:07 renamed: -X,       use -cursor X\n31/10/2021 20:23:07 renamed: -nomouse, use -nocursor\n31/10/2021 20:23:07 renamed: -old_pointer, use -pointer_mode 1\n```\n\nそのため以下のように実行\n$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -forever\n\n\n起動確認\n\n`$ ss -antp | grep vnc`\n\n```bash\nLISTEN    0         32                127.0.0.1:5900            0.0.0.0:*        users:((\"x11vnc\",pid=8056,fd=8))\nLISTEN    0         32                    [::1]:5900               [::]:*        users:((\"x11vnc\",pid=8056,fd=9))\nkali@kali:~$\n```\n\n\n\n\nここでもエラーが出る。\n$ /usr/share/novnc/utils/launch.sh --listen 8081 --vnc localhost\n```bash\nWarning: could not find self.pem\nUsing installed websockify at /usr/bin/websockify\nStarting webserver and WebSockets proxy on port 8081\nUsage: \n    websockify [options] [source_addr:]source_port [target_addr:target_port]\n    websockify [options] [source_addr:]source_port -- WRAP_COMMAND_LINE\n\nwebsockify: error: Error parsing target\nFailed to start WebSockets proxy\n```\n[novnc公式のIssue](https://github.com/novnc/noVNC/issues/1443)でも似た症状が報告されてた。\n\n\n`$ cd ~`\n`$ git clone https://github.com/novnc/noVNC.git`\n`$ cd noVnc/utils/novnc_proxy --vnc localhost:5900`\n\n\n\nサーバー側の別のターミナルでsshを有効にする（？）\n`$ sudo systemctl enable ssh --now`\n\n\nクライアントのターミナルからポートフォワーディング。sshでログインした状態になればOK。\n`ssh kali@192.168.0.140 -L 6080:localhost:6080`\n\n\nクライアントのWebブラウザで以下のようにアクセスする。\nhttp://localhost:6080/vnc.html\n"}]},"__N_SSG":true},"page":"/tag/[tag]","query":{"tag":"Linux"},"buildId":"5Flyn-MnMPFZhPCQn0UwW","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>