<!DOCTYPE html><html lang="ja" prefix="og:https://ikmnjrd.github.io/ns#"><head><meta name="author" content="ikmnjrd"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0"/><title>Webブラウザの記事 | ikmnjrd.github.io</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/3f82bf3e176259c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3f82bf3e176259c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6f6ae1d215842d45.js" defer=""></script><script src="/_next/static/chunks/pages/tag/%5Btag%5D-a64fc3983caadf43.js" defer=""></script><script src="/_next/static/iD73epScTWcjv7Jb-kKxM/_buildManifest.js" defer=""></script><script src="/_next/static/iD73epScTWcjv7Jb-kKxM/_ssgManifest.js" defer=""></script><script src="/_next/static/iD73epScTWcjv7Jb-kKxM/_middlewareManifest.js" defer=""></script></head><body class="dark:bg-newmo-800 text-newmo-400 dark:text-newmo-100"><div id="__next" data-reactroot=""><header class="mb-4 p-4 md:px-8"><div class="flex items-end justify-between"><h1 class="col-start-1 col-end-6"><a alt="Home" class="header-text md:text-5xl text-3xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/">ikmnjrd.github.io</a><button class="md:ml-3 ml-2" aria-label="Toggle Theme"><img width="24px" height="24px" class="svg-icon md:w-10 hover:opacity-50 active:opacity-30" src="/light_mode_white_24dp.svg" alt="Dark Mode Status is false" aria-hidden="true"/></button></h1><div class="col-start-6 col-end-7 md:block hidden"><a alt="tag一覧" class="header-text md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/tags">Tags</a></div></div><div class="md:hidden text-right "><a alt="tag一覧" class="header-text md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/tags">Tags</a></div></header><main class="max-w-2xl md:mx-auto mx-4"><h2>Webブラウザ<!-- -->の投稿記事一覧</h2><div><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/consolelog-effect">cosole.logをソースコードに残しておくことのメモリへの影響について</a></li><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/event-bubbling-capturing-on-react">イベントキャプチャリングとバブリング（React）</a></li><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/font-what-is">フォントについて</a></li><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/wasm-and-v8engine">疑問メモ_WASMとV8エンジン</a></li><li><a class="hover:underline hover:text-newmo-400 visited:text-newmo-300" href="/blog/what-csp-hash-directive">疑問メモ_scriptタグのcsp-hashディレクティブについて</a></li></div></main><footer class="text-center py-5 text-sm text-newmo-300" role="contentinfo"><p>©︎ikmnjrd - <time dateTime="Mon Feb 14 2022 14:21:06 GMT+0000 (Coordinated Universal Time)">2022</time></p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"tag":"Webブラウザ","posts":[{"slug":"consolelog-effect","frontmatter":{"title":"cosole.logをソースコードに残しておくことのメモリへの影響について","date":"2022-01-05","tag":["JavaScript","Webブラウザ"]},"content":"\n### 疑問\nconsole.logの上書きで本番環境はデバッグメッセージを表示させないという技を知ったが、これがメモリに影響ないのかどうか知りたい。\n```javascript\nconsole.log = () =\u003e {}\n```\nちなみに最近ディベロッパーツールでメモリーのスナップショットを撮るという技を知った。\n\nCreate React Appで適当に作ったプロジェクトで適当にconsole.logを出力してみた。\n![ソース](https://i.gyazo.com/f55499b3db011a5c81d04c58d71b089b.png)\n\n`console.log`の呼び出しを増やしてブラウザを更新-\u003eHEAP Snapshot取得すると`console.log`の呼び出し回数に応じてメモリ使用量が一見増えるように見えたが、しばらく放置して再びHEAP Snapshotを取得するとメモリ使用量が低水準にまで戻る。GCに回収されたのかな？と想像したが、よくわからない。\n![メモリ](https://i.gyazo.com/1ef68f7e017d8ed2309a6ff90d9036ad.png)\n\n### 結論\nほぼ影響はない\n"},{"slug":"event-bubbling-capturing-on-react","frontmatter":{"title":"イベントキャプチャリングとバブリング（React）","categories":"tech","date":"2022-01-17","tag":["React","JavaScript","Webブラウザ"]},"content":"Reactはあまり関係ないです。\n\n筆者はReactからWebの世界に入ったため、Reactの世界観からWeb標準技術を見ることが多いですが、Reactのドキュメントを読んでいるとWeb標準なのかReactの世界の話なのかがよくわからないまま進んでしまいます。そんな状況だったので、JavaScriptの勉強を改めてしていたところに「Reactをやっていて出てきた言葉だけど、なんかよくわからないからスルーしたやつだ！」と再会を果たしたので記念にこの記事を書いています。\n\n### 例題\n\n```javascript\nfunction Hoge() {\n  return (\n    \u003cdiv onClick={() =\u003e console.log(\"test\")}\u003e\n      \u003cp onClick={() =\u003e console.log(\"p\")} \u003epだよ\u003c/p\u003e\n    \u003c/div\u003e\n  );\n}\n```\n作成した`\u003cp/\u003e`をクリックすると次のようになります。これが何気なく目にしている挙動と書き方だと思います。\n\n![実行結果1](https://i.gyazo.com/63f658d09ff5f2711823f9e01fc1c2a1.png)\n\n\n次に`onClickCapture`という属性からconsole.logで結果を出力してみましょう。\n\n```javascript\nfunction Hoge() {\n  return (\n    \u003cdiv onClickCapture={() =\u003e console.log(\"test\")}\u003e\n      \u003cp onClick={() =\u003e console.log(\"p\")} \u003epだよ\u003c/p\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nconsole.logで出力される順序が変わりました。\n\n![実行結果2](https://i.gyazo.com/3fb88bf4ba65dbc23410e35d38cf89d9.png)\n\nこれはWEBの標準仕様、DOMのイベントフローに基づいた仕様なのでvanillaJSであろうが、Reactであろうが元の考え方は一緒です。\n\n\n### イベントフロー\n`キャプチャリングフェーズ` 親から子へイベントを見ていく処理\n|\n`ターゲットフェーズ` 発生源の要素に到達した後、その要素自体の処理\n|\n`バブリングフェーズ` 発生源から親へイベントを見ていく段階\n参考: [https://www.w3.org/TR/DOM-Level-3-Events/#event-flow](https://www.w3.org/TR/DOM-Level-3-Events/#event-flow)\n\n### JavaScriptとReact\nJavaScriptではaddEventListenrで初心者的に何も意識せずにイベントを追加すると、バブリングフェーズでイベントが発火します。\n\nReactでも通常、ほとんどのイベントでバブリングフェーズで発火します。\n\u003e 以下のイベントハンドラはイベント伝搬のバブリングフェーズで呼び出されます。キャプチャフェーズのイベントハンドラを登録するには、イベント名に Capture を追加します。たとえば、キャプチャフェーズでクリックイベントを処理するには onClick の代わりに onClickCapture を使用します。\n\n\n### addEventListenerの第3引数（オプション）\n第3引数にあたるものは`options`、もしくは`useCapture`のプロパティです。構造上、第3引数に急にBoolean(true/false)が現れたら、useCapture属性のことです。\n以下に引用したMDNの小難しく感じる文章もそこそこ理解できるようになったのではないでしょうか。\n\n\n- options\n  - capture\n    - Boolean値で、この型のイベントがDOMツリーで下に位置するEventTargetに配信dispatchされる前に、登録されたlistenerに配信されることを示します。\n  - once\n    - Boolean値で、listenerの呼び出しを一回のみのとしたいかどうかを値で指定します。trueを指定すると、listenerは一度実行された時に自動的に削除されます。\n- useCapture\n  - Boolean値で、この型のイベントが、DOMツリー内の下のEventTargetに配信される前に、登録されたlistenerに配信されるかどうかを示します。ツリーを上方向にバブリングしているイベントは、キャプチャーを使用するように指定されたリスナーを起動しません。イベントのバブリングとキャプチャーは、両方の要素がそのイベントのハンドラーを登録している場合に、別の要素内に入れ子になっている要素で発生するイベントを伝播する2つの方法です。イベント伝播モードは、要素がイベントを受け取る順番を決定します。詳細な説明は DOM Level 3 Events と JavaScript Event order を参照してください。指定されていない場合、useCaptureは既定でfalseとなります。\n\n\n### 参考\n- [https://uhyohyo.net/javascript/3_4.html](https://uhyohyo.net/javascript/3_4.html)\n- [https://developer.mozilla.org/ja/docs/Web/API/EventTarget/addEventListener](https://developer.mozilla.org/ja/docs/Web/API/EventTarget/addEventListener)\n- [https://ja.reactjs.org/docs/events.html](https://ja.reactjs.org/docs/events.html)\n- [https://ja.reactjs.org/blog/2020/08/10/react-v17-rc.html#no-event-pooling](https://ja.reactjs.org/blog/2020/08/10/react-v17-rc.html#no-event-pooling)\n"},{"slug":"font-what-is","frontmatter":{"title":"フォントについて","date":"2022-02-06","tag":["Webブラウザ"]},"content":"### フォント\nデジタルデータとしてフォントを表示するには切っても切り離せない。\nこれはもちろんWebの世界でも、ネイティブアプリの世界でも一緒。\n\nフォントがない世界はありえない。\n\n### 歴史？\nAdobeはフォントという存在を意識できる人なら誰でも知ってる。\n「Adobe Illustrator」「Adobe Photoshop」などに始まり、印刷用に開発されたPostScriptなどを開発したりしていた。\n\ntruetype(.ttf)\nwoff(.wof)\nwoff2(.woff2)\nなどの拡張子がある。\n\n### フォントをユーザーにどう届けるか\n* クライアントにプリインストールされているフォントを使う\n* 自サーバーから配信\n* Webフォントを使う（配信されているものにタダ乗り）\n\n#### ライアントにプリインストールされているフォントを使う\n\n- macOS Big Sur\n  - [https://support.apple.com/ja-jp/HT211240](https://support.apple.com/ja-jp/HT211240)\n- Windows 11\n  -  [https://docs.microsoft.com/en-us/typography/fonts/windows_11_font_list](https://docs.microsoft.com/en-us/typography/fonts/windows_11_font_list)\n- iOS\n  - [https://developer.apple.com/fonts/system-fonts/](https://developer.apple.com/fonts/system-fonts/)\n- Android\n  - 端末メーカーによる場合があり\n\n#### 自サーバーから配信\n主要ブラウザはwoff2に対応しているので、woff2で用意するば十分。\n\n[対応ブラウザ](https://caniuse.com/woff2)\n\n#### Webフォントを使う\n有名なものとして\n- [Google Fonts](https://googlefonts.github.io/japanese/)\n- [REALTYPE](https://www.realtype.jp/)\n\n\n### 参考文献\n- [各OSの標準搭載フォント一覧へのリンク集  |  Rriver](https://parashuto.com/rriver/development/preinstalled-font-list-by-operating-system)\n\n"},{"slug":"wasm-and-v8engine","frontmatter":{"title":"疑問メモ_WASMとV8エンジン","date":"2021-12-26","tag":["Webブラウザ"]},"content":"\n### 疑問\nWebブラウザではV8エンジンがJavaScriptを解釈・実行するのはわかったが、JavaScriptに埋め込まれたwasm（別言語・npm）で提供されている場合もV8エンジンが同一スレッド内でwasmを解釈・実行するの？\nV8がhidden classを作成して、、、\n\n### 参考文献\n- [https://postd.cc/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code/](https://postd.cc/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code/)\n"},{"slug":"what-csp-hash-directive","frontmatter":{"title":"疑問メモ_scriptタグのcsp-hashディレクティブについて","date":"2022-01-19","tag":["Webブラウザ"]},"content":"### 疑問に遭遇した状況\nネットサーフィンをしていて`\u003chead/\u003e`を覗いていた\n\n### 疑問\ncsp-hashディレクティブって何？なんのために使うの？\n\nどうもcspは Content-Security-Policy の略っぽい。\n```html\n\u003cscript csp-hash\u003e\n  if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')\n\u003c/script\u003e\n```\n\nこのブログがわかりやすかった気がしたが、わからなかった。[CSP(コンテンツセキュリティポリシー)について調べてみた - SSTエンジニアブログ](https://techblog.securesky-tech.com/entry/2020/05/21/)\n\n\n### 参考文献\n- [patterns.dev](https://www.patterns.dev/)\n- [CSP(コンテンツセキュリティポリシー)について調べてみた - SSTエンジニアブログ](https://techblog.securesky-tech.com/entry/2020/05/21/)\n"}]},"__N_SSG":true},"page":"/tag/[tag]","query":{"tag":"Webブラウザ"},"buildId":"iD73epScTWcjv7Jb-kKxM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>