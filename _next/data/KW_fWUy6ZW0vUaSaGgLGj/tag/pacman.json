{"pageProps":{"tag":"pacman","posts":[{"slug":"pacman-mirrorlist","frontmatter":{"title":"pacmanミラーリストの更新","date":"2024-07-23","tag":["Linux","pacman"]},"content":"\n\n| 関連ソフトウェア | バージョン |\n|:--------------|:---------|\n| EndevaourOS   | Build=2024.01.25   |\n\n\n## 結論\n\n```sh\ncurl -s \"https://archlinux.org/mirrorlist/?country=JP&country=AU&protocol=https&use_mirror_status=on\" | sed -e 's/^#Server/Server/' -e '/^#/d' | rankmirrors -n 5 - | sudo tee /etc/pacman.d/mirrorlist\n```\n\n## 経緯とシューティングタイムライン\n`$ sudo pacman -Syu`をするとエラー\n```\nエラー: ファイル 'core.db' を mirror.nishi.network から取得するのに失敗しました : Failed to connect to mirror.nishi.network port 443 after 7150 ms: Couldn't connect to server\nエラー: ファイル 'extra.db' を mirror.nishi.network から取得するのに失敗しました : Failed to connect to mirror.nishi.network port 443 after 7150 ms: Couldn't connect to server\nエラー: ファイル 'multilib.db' を mirror.nishi.network から取得するのに失敗しました : Failed to connect to mirror.nishi.network port 443 after 7150 ms: Couldn't connect to server\n警告: mirror.nishi.network からのエラーが多すぎるため、残りの処理ではスキップします\n```\n\n`/etc/pacman.d/mirrorlist`はこうなってた\n```\n################################################################################\n################# Arch Linux mirrorlist generated by Reflector #################\n################################################################################\n\n# With:       reflector --verbose -c JP --protocol https --sort rate --latest 20 --download-timeout 5 --threads 5\n# When:       2024-04-02 14:59:21 UTC\n# From:       https://archlinux.org/mirrors/status/json/\n# Retrieved:  2024-04-02 14:57:27 UTC\n# Last Check: 2024-04-02 14:53:55 UTC\n\nServer = https://mirror.nishi.network/archlinux/$repo/os/$arch\nServer = https://mirrors.cat.net/archlinux/$repo/os/$arch\n```\n\n[ArchWiki](https://wiki.archlinux.jp/index.php/%E3%83%9F%E3%83%A9%E3%83%BC)にも色々書いてあるが、とりあえずChatGPTにコマンド組んでもらったのが以下\n```sh\ncurl -s \"https://archlinux.org/mirrorlist/?country=JP&country=AU&protocol=https&use_mirror_status=on\" | sed -e 's/^#Server/Server/' -e '/^#/d' | rankmirrors -n 5 - | sudo tee /etc/pacman.d/mirrorlist\n```\n\n実行後に生成したファイルの中身は以下\n```\nServer = https://repo.jing.rocks/archlinux/$repo/os/$arch\nServer = https://jp.mirrors.cicku.me/archlinux/$repo/os/$arch\nServer = https://mirrors.cat.net/archlinux/$repo/os/$arch\nServer = https://ftp.jaist.ac.jp/pub/Linux/ArchLinux/$repo/os/$arch\nServer = https://www.miraa.jp/archlinux/$repo/os/$arch\n```\n\n\n### 参考文献\n- [ミラー - ArchWiki](https://wiki.archlinux.jp/index.php/%E3%83%9F%E3%83%A9%E3%83%BC)\n- "}]},"__N_SSG":true}