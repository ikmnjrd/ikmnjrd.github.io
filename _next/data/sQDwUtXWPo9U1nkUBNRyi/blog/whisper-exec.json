{"pageProps":{"frontmatter":{"title":"音声認識モデルwhisperをインストールしてみた","description":"whisper from openai を使ってみた際のメモ","date":"2022-10-17","tag":["Python","音声認識","文字起こし"]},"slug":"whisper-exec","innerHtml":"<p>自分の環境のメモ的な意味合いが強いので、他のブログなどを参考にした方がいいです。<br>\n<a href=\"https://ysdyt.hatenablog.jp/entry/whisper\">音声認識モデルwhisperの全モデル文字起こし比較 - 毎日がEveryday、日々 Day by Day</a><br>\n私は上のブログを見て使ってみようと思いました。</p>\n<h2 id=\"%E7%92%B0%E5%A2%83\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E7%92%B0%E5%A2%83\" aria-hidden=\"true\">#</a> 環境</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">ソフト/ハード</th>\n<th style=\"text-align:right\">バージョン</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\">iMac</td>\n<td style=\"text-align:right\">27-inch, 2017</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">macOS</td>\n<td style=\"text-align:right\">12.6</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">Python</td>\n<td style=\"text-align:right\">3.9.6</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">pip</td>\n<td style=\"text-align:right\">22.3</td>\n</tr>\n</tbody>\n</table>\n<p>普段pythonを使わない（言い訳）ので<code>% python3 hogehoge</code> <code>% pip3 hogehoge</code> とaliasすら貼ってない環境です。</p>\n<h2 id=\"%E6%89%8B%E9%A0%86\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E6%89%8B%E9%A0%86\" aria-hidden=\"true\">#</a> 手順</h2>\n<p>ffmpegをインストール</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">% brew <span class=\"token function\">install</span> ffmpeg\n</code></pre>\n<p>whisperをインストール</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">% pip3 <span class=\"token function\">install</span> git+https://github.com/openai/whisper.git\n</code></pre>\n<p>すると以下の警告が表示された。</p>\n<pre class=\"language-sh-session\"><code class=\"language-sh-session\"><span class=\"token output\">Installing collected packages: whisper\n  WARNING: The script whisper is installed in '/Users/ike/Library/Python/3.9/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\nSuccessfully installed whisper-1.0\n</span></code></pre>\n<p>Pythonを日常使いすることないので、そうだったんだねー(どうやるのがスマートなんですか？)という気持ちで特にパスを通さず直接実行してみる。</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">% /Users/ike/Library/Python/3.9/bin/whisper /Users/ike/Downloads/recording.mp3 <span class=\"token parameter variable\">--language</span> Japanese <span class=\"token parameter variable\">--model</span> base\n</code></pre>\n<p>ちなみに自分の環境ではコマンド実行時に以下の警告が出た。</p>\n<pre class=\"language-sh-session\"><code class=\"language-sh-session\"><span class=\"token output\"> UserWarning: FP16 is not supported on CPU; using FP32 instead\n  warnings.warn(\"FP16 is not supported on CPU; using FP32 instead\")\n</span></code></pre>\n<p>標準出力には以下のように出力される。</p>\n<pre class=\"language-txt\"><code class=\"language-txt\">[00:00.000 --> 00:12.320] テストですと 本日はウィスパーの 紹介をしたいと思います\n[00:12.320 --> 00:19.280] (恥ずかしいので省略)\n[00:19.280 --> 00:26.720] トコマンドラインから実行することが できます\n</code></pre>\n<p>さらに、以下のようなファイルがカレントディレクトリに作成される。<br>\nそれぞれ形式違うらしいが標準出力とほぼ同じテキストファイル。</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">-rw-r--r--    <span class=\"token number\">1</span> ike   staff    <span class=\"token number\">319</span> Oct <span class=\"token number\">17</span> <span class=\"token number\">20</span>:02 recording.mp3.srt\n-rw-r--r--    <span class=\"token number\">1</span> ike   staff    <span class=\"token number\">220</span> Oct <span class=\"token number\">17</span> <span class=\"token number\">20</span>:02 recording.mp3.txt\n-rw-r--r--    <span class=\"token number\">1</span> ike   staff    <span class=\"token number\">303</span> Oct <span class=\"token number\">17</span> <span class=\"token number\">20</span>:02 recording.mp3.vtt\n</code></pre>\n<h2 id=\"%E3%81%BE%E3%81%A8%E3%82%81\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-hidden=\"true\">#</a> まとめ</h2>\n<p><a href=\"https://github.com/openai/whisper/discussions/categories/show-and-tell\">GitHubのDiscussions</a>内でwhisperを使ったツールなどが紹介されている。<br>\n中にはリアルタイム文字起こしなどもあって眼福。<br>\n個人的にはWeb会議を録音しておいて、議事録作成に役立てばすごく満足なので、一々上のコマンドを叩く使い方でしばらく使ってみようと思う。</p>\n<h3 id=\"%E5%91%A8%E8%BE%BA%E7%94%A8%E8%AA%9E\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E5%91%A8%E8%BE%BA%E7%94%A8%E8%AA%9E\" aria-hidden=\"true\">#</a> 周辺用語</h3>\n<ul>\n<li>FP16</li>\n<li>FP32</li>\n</ul>\n<h3 id=\"%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-hidden=\"true\">#</a> 参考文献</h3>\n<ul>\n<li><a href=\"https://ysdyt.hatenablog.jp/entry/whisper\">音声認識モデルwhisperの全モデル文字起こし比較 - 毎日がEveryday、日々 Day by Day</a></li>\n<li><a href=\"https://github.com/openai/whisper\">openai/whisper: Robust Speech Recognition via Large-Scale Weak Supervision</a></li>\n</ul>\n"},"__N_SSG":true}