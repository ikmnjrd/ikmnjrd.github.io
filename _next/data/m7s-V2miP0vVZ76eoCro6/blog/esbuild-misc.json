{"pageProps":{"frontmatter":{"title":"esbuildを触った際の雑記","description":"esbuildについての雑記","date":"2022-03-15","tag":["Node.js","JavaScript","esbuild","TypeScript"]},"slug":"esbuild-misc","innerHtml":"<p>Viteを使った方が楽だけど、できるだけシンプルな環境を作りたい気持ちでesbuildを触っています。</p>\n<h3 id=\"config%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#config%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-hidden=\"true\">#</a> configファイルを作成する場合</h3>\n<p>watchオプションを有効にした時、ビルド情報を出力するため<a href=\"https://esbuild.github.io/api/#log-level\">logLevel</a>をinfoにすると良い。</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// esbuild.config.js</span>\n<span class=\"token keyword\">const</span> esbuild <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'esbuild'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nesbuild<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">logLevel</span><span class=\"token operator\">:</span> <span class=\"token string\">'info'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\n<span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node esbuild.config.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  ...\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"css-module-%2B-typescript%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#css-module-%2B-typescript%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\" aria-hidden=\"true\">#</a> CSS Module + TypeScriptで利用したい場合</h3>\n<p><code>esbuild-css-modules-plugin</code>をインストールしPluginとして読み込む(<a href=\"https://github.com/indooorsman/esbuild-css-modules-plugin\">GitHubリポジトリ</a>)</p>\n<p>declareファイルを<code>src/</code>以下に置いておく。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// index.d.ts</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'*.css'</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IClassNames</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>className<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> classNames<span class=\"token operator\">:</span> IClassNames<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token operator\">=</span> classNames<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"%E5%91%A8%E8%BE%BA%E7%94%A8%E8%AA%9E\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E5%91%A8%E8%BE%BA%E7%94%A8%E8%AA%9E\" aria-hidden=\"true\">#</a> 周辺用語</h3>\n<ul>\n<li>CSS modules</li>\n<li>PostCSS</li>\n</ul>\n<h3 id=\"%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-hidden=\"true\">#</a> 参考文献</h3>\n<ul>\n<li><a href=\"https://github.com/evanw/esbuild\">GitHubリポジトリ - esbuild</a></li>\n<li><a href=\"https://how-to.dev/how-to-set-up-css-modules-with-esbuild\">How to set up CSS Modules with esbuild</a></li>\n<li><a href=\"https://github.com/indooorsman/esbuild-css-modules-plugin\">GitHubリポジトリ - esbuild-css-modules-plugin</a>)</li>\n<li><a href=\"https://www.kabuku.co.jp/developers/create-your-own-esbuild-plugin\">esbuild の機能が足りないならプラグインを自作すればいいじゃない</a></li>\n</ul>\n","createdAt":"2022-10-17","updatedAt":"2022-10-17"},"__N_SSG":true}