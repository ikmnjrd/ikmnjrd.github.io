{"pageProps":{"tag":"Python","posts":[{"slug":"whisper-exec","frontmatter":{"title":"音声認識モデルwhisperをインストールしてみた","description":"whisper from openai を使ってみた際のメモ","date":"2022-10-17","tag":["Python","音声認識","文字起こし"]},"content":"\n自分の環境のメモ的な意味合いが強いので、他のブログなどを参考にした方がいいです。  \n[音声認識モデルwhisperの全モデル文字起こし比較 - 毎日がEveryday、日々 Day by Day](https://ysdyt.hatenablog.jp/entry/whisper)  \n私は上のブログを見て使ってみようと思いました。\n\n## 環境\n| ソフト/ハード | バージョン |\n|--------------:|---------:|\n| iMac          | 27-inch, 2017     |\n| macOS         | 12.6     |\n| Python        | 3.9.6    |\n| pip           | 22.3     |\n\n普段pythonを使わない（言い訳）ので`% python3 hogehoge` `% pip3 hogehoge` とaliasすら貼ってない環境です。\n\n\n## 手順\nffmpegをインストール\n```sh\n% brew install ffmpeg\n```\n\nwhisperをインストール\n```sh\n% pip3 install git+https://github.com/openai/whisper.git\n```\n\nすると以下の警告が表示された。\n```sh-session\nInstalling collected packages: whisper\n  WARNING: The script whisper is installed in '/Users/ike/Library/Python/3.9/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\nSuccessfully installed whisper-1.0\n```\nPythonを日常使いすることないので、そうだったんだねー(どうやるのがスマートなんですか？)という気持ちで特にパスを通さず直接実行してみる。\n```sh\n% /Users/ike/Library/Python/3.9/bin/whisper /Users/ike/Downloads/recording.mp3 --language Japanese --model base\n```\nちなみに自分の環境ではコマンド実行時に以下の警告が出た。\n```sh-session\n UserWarning: FP16 is not supported on CPU; using FP32 instead\n  warnings.warn(\"FP16 is not supported on CPU; using FP32 instead\")\n```\n\n標準出力には以下のように出力される。\n```txt\n[00:00.000 --> 00:12.320] テストですと 本日はウィスパーの 紹介をしたいと思います\n[00:12.320 --> 00:19.280] (恥ずかしいので省略)\n[00:19.280 --> 00:26.720] トコマンドラインから実行することが できます\n```\n\nさらに、以下のようなファイルがカレントディレクトリに作成される。  \nそれぞれ形式違うらしいが標準出力とほぼ同じテキストファイル。\n```sh\n-rw-r--r--    1 ike   staff    319 Oct 17 20:02 recording.mp3.srt\n-rw-r--r--    1 ike   staff    220 Oct 17 20:02 recording.mp3.txt\n-rw-r--r--    1 ike   staff    303 Oct 17 20:02 recording.mp3.vtt\n```\n\n## まとめ\n[GitHubのDiscussions](https://github.com/openai/whisper/discussions/categories/show-and-tell)内でwhisperを使ったツールなどが紹介されている。  \n中にはリアルタイム文字起こしなどもあって眼福。  \n個人的にはWeb会議を録音しておいて、議事録作成に役立てばすごく満足なので、一々上のコマンドを叩く使い方でしばらく使ってみようと思う。\n\n### 周辺用語\n- FP16\n- FP32\n\n\n### 参考文献\n- [音声認識モデルwhisperの全モデル文字起こし比較 - 毎日がEveryday、日々 Day by Day](https://ysdyt.hatenablog.jp/entry/whisper)\n- [openai/whisper: Robust Speech Recognition via Large-Scale Weak Supervision](https://github.com/openai/whisper)\n\n\n\n\n\n\n\n\n\n\n"}]},"__N_SSG":true}