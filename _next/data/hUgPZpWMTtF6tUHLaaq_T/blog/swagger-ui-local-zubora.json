{"pageProps":{"frontmatter":{"title":"ズボラにローカルでswagger-uiを使う","description":"ズボラにローカルでswagger-uiを使う","date":"2022-05-10","tag":["Swagger","OpenAPI"]},"slug":"swagger-ui-local-zubora","innerHtml":"<h3 id=\"%E3%81%8D%E3%81%A3%E3%81%8B%E3%81%91%E3%81%A8%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E3%81%8D%E3%81%A3%E3%81%8B%E3%81%91%E3%81%A8%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85\" aria-hidden=\"true\">#</a> きっかけと対象読者</h3>\n<p>SwaggerことOpenAPI(以下、OAS)でドキュメントが書かれているが、特にそれが利用されているわけでもないプロジェクトに入ったばかりの頃（執筆している今）。\nフロントエンドを中心に新規実装を担当していたが、APIの完成待ちの部分が多く、フロント・バックエンドともに未着手のAPI仕様を作る仕事が回ってきた。\n手書きしてもいいが、どうせだったらOASの便利ツールにも手を出してみたくなったによるズボラ記事。\n似た境遇じゃなきゃ以下の手順は参考にならないと思う。</p>\n<h3 id=\"%E6%89%8B%E9%A0%86\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E6%89%8B%E9%A0%86\" aria-hidden=\"true\">#</a> 手順</h3>\n<h4 id=\"swagger-ui%E5%81%B4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#swagger-ui%E5%81%B4\" aria-hidden=\"true\">#</a> swagger-ui側</h4>\n<p>勝手にプロジェクトのリポジトリにインストールしたくないので、<a href=\"https://github.com/swagger-api/swagger-ui\">git clone</a>して使う。\n<code>$ git clone git@github.com:swagger-api/swagger-ui.git &amp;&amp; cd swagger-ui</code>\n<code>$ cd swagger-ui</code>\n<code>$ npm run dev</code></p>\n<p>localhost:3200でswagger-uiが起動するので開く</p>\n<h4 id=\"oas%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E5%81%B4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#oas%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E5%81%B4\" aria-hidden=\"true\">#</a> OASドキュメント側</h4>\n<p><code>$ npm install -g http-server</code>\n<code>$ cd {your-oas-document-dir}</code>\n<code>$ http-server --cors</code></p>\n<p>localhost:8080でサーバー起動</p>\n<p><img src=\"/images/posts/swagger-ui-local-zubora-0.avif\" alt=\"画面例\"></p>\n<p>テキストボックスに<code>http://localhost:8080/your-oas.json</code>などと入れてExploreボタンを押す。</p>\n<h3 id=\"%E3%81%9D%E3%81%AE%E4%BB%96\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\" aria-hidden=\"true\">#</a> その他</h3>\n<p>swagger-ui起動時にはデフォルトで <code>https://petstore.swagger.io/v2/swagger.json</code>に接続される。</p>\n<p><code>swagger-ui/dev-helpers/dev-helper-initializer.js</code>に設定があったりするので、いじれる。ここらへんはしっかりと公式ドキュメントに書かれているのでぜひ見てみてください。</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Build a system</span>\n  <span class=\"token keyword\">const</span> ui <span class=\"token operator\">=</span> <span class=\"token function\">SwaggerUIBundle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-oas-file\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">dom_id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#swagger-ui\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      SwaggerUIBundle<span class=\"token punctuation\">.</span>presets<span class=\"token punctuation\">.</span>apis<span class=\"token punctuation\">,</span>\n      SwaggerUIStandalonePreset\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      SwaggerUIBundle<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span>DownloadUrl\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// requestSnippetsEnabled: true,</span>\n    <span class=\"token literal-property property\">layout</span><span class=\"token operator\">:</span> <span class=\"token string\">\"StandaloneLayout\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3 id=\"%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-hidden=\"true\">#</a> 参考文献</h3>\n<ul>\n<li><a href=\"https://github.com/swagger-api/swagger-ui/issues/1110#issuecomment-155873088\">how to load local .json file? · Issue #1110 · swagger-api/swagger-ui</a></li>\n<li><a href=\"https://tech.buysell-technologies.com/entry/2021/09/21/095238\">治安のいいOpenAPIの開発環境を作る</a></li>\n<li><a href=\"https://www.npmjs.com/package/swagger-ui\">npm - swagger-ui</a></li>\n<li><a href=\"https://github.com/swagger-api/swagger-ui/blob/master/docs/development/setting-up.md\">swagger-ui/setting-up.md at master · swagger-api/swagger-ui</a></li>\n</ul>\n","anchors":[{"text":"きっかけと対象読者","link":"%E3%81%8D%E3%81%A3%E3%81%8B%E3%81%91%E3%81%A8%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85"},{"text":"手順","link":"%E6%89%8B%E9%A0%86"},{"text":"swagger-ui側","link":"swagger-ui%E5%81%B4"},{"text":"oasドキュメント側","link":"oas%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E5%81%B4"},{"text":"その他","link":"%E3%81%9D%E3%81%AE%E4%BB%96"},{"text":"参考文献","link":"%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"}]},"__N_SSG":true}