{"pageProps":{"tag":"Safari","posts":[{"slug":"safari-before-block","frontmatter":{"title":"疑似要素を使ったチェックボックスを書いた際にSafariで困ったこと","date":"2023-03-31","tag":["CSS","Safari"]},"content":"\nチェックボックスを少し洒落たデザインにする時、疑似要素の:beforeと:afterを使って実装すると思う。そんな時にsafariで困った時の備忘録。  \n\n### 実装の雰囲気\n```html\n<div class=\"box\">\n  <input id=\"checkbox_1\" type=\"checkbox\" class=\"no-display\" />\n  <label for=\"checkbox_1\" class=\"designed\"><span>テキスト</span></label>\n</div>\n```\n```css\n.box {\n  position: relative;\n}\n.no-display {\n  display: none;\n}\n.designed:before,\n.designed:after {\n  position: absolute;\n  content: \"\";\n  display: block;\n}\n.designed:before {\n  z-index: 1;\n  border-right: 2px solid #000;\n  border-bottom: 2px solid #000;\n  left: 7px;\n  width: 5px;\n  height: 8px;\n  top: 3px;\n  transform: rotate(45deg);\n  opacity: 0;\n}\n.designed:after {\n  content: \"\";\n  border: 1px solid #d3d5d5;\n  border-radius: 4px;\n  top: 0;\n  left: 0;\n  width: 18px;\n  height: 18px;\n  background-color: #fff;\n}\n.designed > span {\n  margin-left: 24px;\n}\n.no-display:checked + .designed:before {\n  opacity: 1;\n}\n\n```\n\n### 問題の状態\n問題になった箇所がsafariで、`position: absolute`をしていしているにも関わらず、疑似要素が before - 要素 - afterの順を崩してくれない。  \nそのためbeforeとafterの要素を重ね合わせたいのに分離してしまっている。  \n\n- safariでのレンダリング結果\n![OSX-safari(16.0)でのレンダリング結果](https://i.gyazo.com/e63e9404ae95aa49af9b4616f9c4d15a.png)\n\n- Chrome等でのレンダリング結果\n![OSX-Braveでのレンダリング結果](https://i.gyazo.com/a4a4deec03d659f3a271762295f3c265.png)\n\n### 対策\n自分に何の理解が足りていないのかがいまいち判然としませんが、「span(非変形可能要素)にtransformが効かないようなものかな〜」と感じて、上記コードを次のようにすることで無理やり解決しました。\n\n\n```css\n.box {\n  position: relative;\n  display: flex;\n  justify-content: left;\n}\n```\n\n場当たり感が否めません。\n\n\n### 検証に使ったsandbox\nsafari用のものが見たいならsafariで開き、chrome用のものが見たいならchromeで開いてください。頭痛が痛い。  \n<iframe src=\"https://codesandbox.io/embed/pedantic-nash-sr1d7v?fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"pedantic-nash-sr1d7v\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>"}]},"__N_SSG":true}