{"pageProps":{"tag":"リファクタリング","posts":[{"slug":"refactoring-and-develop","frontmatter":{"title":"リファクタリングしてますか？","description":"社のチーム内での共有に書いたメモの一部","date":"2024-04-27","tag":["ポエム","リファクタリング"]},"content":"\n\n### 伝えたいことの結論\n「リファクタリング」という言葉には新機能の追加タスクでも既存コードベースの改修が含まれる。\n\n#### 自己紹介\n前提として、私自身は小さな受託システム開発会社（50人規模）で働くWebエンジニアで主に新規開発を転々とやっています。\n\n\n### いつやるか\nコードを触る機会があったなら、それは常にリファクタリングするタイミング。\n\n### 例え話\n料金を表示するコードがあったとする。\n\n```jsx\nconst price = 100\n\nreturn (\n  <div>\n    {{\n      price.toLocaleString(\"ja-JP\", {\n        style: \"currency\", currency: \"JPY\",\n      })\n    }}\n  </div>\n)\n```\n\nもし料金を国別の表にするという変更があったら、次のようにしたとする。  \n\n```jsx\nconst priceJP = 100\nconst priceUS = 1\n\nreturn (\n  <div>\n    <div>日本: {{\n       priceJP.toLocaleString(\"ja-JP\", {\n         style: \"currency\", currency: \"JPY\",\n       })\n    }}</div>\n    <div>米国: {{\n       priceUS.toLocaleString(\"en-US\", {\n         style: \"currency\", currency: \"USD\",\n       })\n     }}</div>\n  </div>\n)\n```\n\npriceだったものが暗黙の了解として日本料金を示していたが、他の国が入ったことで暗黙の了解は崩れそれぞれを明示するに至った。  \n私はこれをいい変更だと考えるものとして次の話に進む。  \n\n### 実際によくあるやつ\nこの部分を既存コードの変更を嫌がって次のようにすることってまま稀によくあると思う。\n\n```jsx\nconst price = 100 // 名前の変更もしない\nconst priceUS = 1 // 新しく追加\n```\n\n私はこういう時、変更の箇所が増えて自分が負わないでいい責任を負ってる感覚を味わうことがあるが、そこも含めてリファクタリングや仕様変更と呼びたい。  \n\n\nしかもこういった部分は `price` のままにするとレビュワーからは差分にならないのでGitHub上から見えづらい。  \n\nそのためレビュイーに頼る部分が多くなるが、善意でバグを発生させようとも善意を持ちたい（静的解析ツールを存分に頼ろう）"}]},"__N_SSG":true}