<!DOCTYPE html><html lang="ja" prefix="og:https://ikmnjrd.github.io/ns#"><head><meta name="author" content="ikmnjrd"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0"/><title>kali linuxでVNCサーバーにnovncで接続する | ikmnjrd.github.io</title><meta property="og:url" content="https://ikmnjrd.github.io/blog/novnc-kali-linux"/><meta property="og:type" content="article"/><meta property="og:image" content="https://ikmnjrd.github.io/images/posts/img1.jpg"/><meta property="og:title" content="kali linuxでVNCサーバーにnovncで接続する"/><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism-okaidia.min.css" rel="stylesheet"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/82ec1b33cdf8c09a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82ec1b33cdf8c09a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/69242f89eb873e0e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/69242f89eb873e0e.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-dcb6ca2f660a232b.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-2b83cde80fbcde2c.js" defer=""></script><script src="/_next/static/Ry1lk5WlP7pcE6Z7RnDrE/_buildManifest.js" defer=""></script><script src="/_next/static/Ry1lk5WlP7pcE6Z7RnDrE/_ssgManifest.js" defer=""></script><script src="/_next/static/Ry1lk5WlP7pcE6Z7RnDrE/_middlewareManifest.js" defer=""></script></head><body class="dark:bg-newmo-800 text-newmo-400 dark:text-newmo-100"><div id="__next" data-reactroot=""><header class="mb-4 p-4 md:px-8"><div class="flex items-end justify-between"><h1 class="col-start-1 col-end-6"><a alt="Home" class="header-text md:text-5xl text-3xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/">ikmnjrd.github.io</a><button class="md:ml-3 ml-2" aria-label="Toggle Theme"><img width="24px" height="24px" class="svg-icon md:w-10 hover:opacity-50 active:opacity-30" src="/light_mode_white_24dp.svg" alt="Dark Mode Status is false" aria-hidden="true"/></button></h1><div class="col-start-6 col-end-7 md:block hidden"><a class="header-text mr-4 md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/about">About</a><a alt="tag一覧" class="header-text md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/tags">Tags</a></div></div><div class="md:hidden text-right "><a class="header-text mr-4 md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/about">About</a><a alt="tag一覧" class="header-text md:text-3xl text-2xl font-serif decoration-dotted hover:opacity-50 hover:underline active:opacity-30" href="/tags">Tags</a></div></header><main class="max-w-2xl md:mx-auto mx-4"><h1 class="text-2xl md:text-3xl lg:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">kali linuxでVNCサーバーにnovncで接続する</h1><div class="text-right">Posted on <!-- -->2021-10-31</div><img alt=""/><div class="markdown-styles_markdown__gsSJH"><p><a href="https://www.kali.org/docs/general-use/novnc-kali-in-browser/">公式</a>にやり方も書いてあるがこの通りだとエラーが出た。</p>
<p><code>$ sudo apt install -y x11vnc</code></p>
<p>以下の部分をそのまま実行するとエラーが出る。
$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -ncache_cr-quiet -forever</p>
<pre class="language-bash"><code class="language-bash"><span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 passing arg to libvncserver: -ncache_cr-quiet
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 x11vnc version: <span class="token number">0.9</span>.16 lastmod: <span class="token number">2019</span>-01-05  pid: <span class="token number">2173</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Using X display :0
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 rootwin: 0x764 reswin: 0x3800001 dpy: 0x1dc24970
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 ------------------ USEFUL INFORMATION ------------------
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 X DAMAGE available on display, using it <span class="token keyword">for</span> polling hints.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   To disable this behavior use: <span class="token string">'-noxdamage'</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   Most compositing window managers like <span class="token string">'compiz'</span> or <span class="token string">'beryl'</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   cause X DAMAGE to fail, and so you may not see any <span class="token function">screen</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   updates via VNC.  Either disable <span class="token string">'compiz'</span> <span class="token punctuation">(</span>recommended<span class="token punctuation">)</span> or
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   supply the x11vnc <span class="token string">'-noxdamage'</span> <span class="token builtin class-name">command</span> line option.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Wireframing: -wireframe mode is <span class="token keyword">in</span> effect <span class="token keyword">for</span> window moves.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   If this yields undesired behavior <span class="token punctuation">(</span>poor response, painting
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   errors, etc<span class="token punctuation">)</span> it may be disabled:
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07    - use <span class="token string">'-nowf'</span> to disable wireframing completely.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07    - use <span class="token string">'-nowcr'</span> to disable the Copy Rectangle after the
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07      moved window is released <span class="token keyword">in</span> the new position.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   Also see the -help entry <span class="token keyword">for</span> tuning parameters.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   You can press <span class="token number">3</span> Alt_L<span class="token string">'s (Left "Alt" key) in a row to 
31/10/2021 20:23:07   repaint the screen, also see the -fixscreen option for
31/10/2021 20:23:07   periodic repaints.
31/10/2021 20:23:07 
31/10/2021 20:23:07 XFIXES available on display, resetting cursor mode
31/10/2021 20:23:07   to: '</span>-cursor <span class="token function">most</span><span class="token string">'.
31/10/2021 20:23:07   to disable this behavior use: '</span>-cursor arrow<span class="token string">'
31/10/2021 20:23:07   or '</span>-noxfixes<span class="token string">'.
31/10/2021 20:23:07 using XFIXES for cursor drawing.
31/10/2021 20:23:07 GrabServer control via XTEST.
31/10/2021 20:23:07 
31/10/2021 20:23:07 Scroll Detection: -scrollcopyrect mode is in effect to
31/10/2021 20:23:07   use RECORD extension to try to detect scrolling windows
31/10/2021 20:23:07   (induced by either user keystroke or mouse input).
31/10/2021 20:23:07   If this yields undesired behavior (poor response, painting
31/10/2021 20:23:07   errors, etc) it may be disabled via: '</span>-noscr<span class="token string">'
31/10/2021 20:23:07   Also see the -help entry for tuning parameters.
31/10/2021 20:23:07   You can press 3 Alt_L'</span>s <span class="token punctuation">(</span>Left <span class="token string">"Alt"</span> key<span class="token punctuation">)</span> <span class="token keyword">in</span> a row to 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   repaint the screen, also see the -fixscreen option <span class="token keyword">for</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   periodic repaints.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Client Side Caching: -ncache mode is <span class="token keyword">in</span> effect to provide
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   client-side pixel data caching.  This speeds up
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   iconifying/deiconifying windows, moving and raising
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   windows, and reposting menus.  In the simple CopyRect
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   encoding scheme used <span class="token punctuation">(</span>no compression<span class="token punctuation">)</span> a huge amount
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   of extra memory <span class="token punctuation">(</span><span class="token number">20</span>-100MB<span class="token punctuation">)</span> is used on both the server and
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   client sides.  This mode works with any VNC viewer.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   However, <span class="token keyword">in</span> <span class="token function">most</span> you can actually see the cached pixel
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   data by scrolling down, so you need to re-adjust its size.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   See http://www.karlrunge.com/x11vnc/faq.html<span class="token comment">#faq-client-caching.</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   If this mode yields undesired behavior <span class="token punctuation">(</span>poor response,
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   painting errors, etc<span class="token punctuation">)</span> it may be disabled via: <span class="token string">'-ncache 0'</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   You can press <span class="token number">3</span> Alt_L's <span class="token punctuation">(</span>Left <span class="token string">"Alt"</span> key<span class="token punctuation">)</span> <span class="token keyword">in</span> a row to 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   repaint the screen, also see the -fixscreen option <span class="token keyword">for</span>
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07   periodic repaints.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 X FBPM extension not supported.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 X display is capable of DPMS.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 --------------------------------------------------------
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Default visual ID: 0x21
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Read initial data from X display into framebuffer.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 initialize_screen: fb_depth/fb_bpp/fb_Bpl <span class="token number">24</span>/32/7680
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 *** unrecognized option<span class="token punctuation">(</span>s<span class="token punctuation">)</span> ***
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07     <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  -ncache_cr-quiet
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 For a list of options run: x11vnc -opts
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 or <span class="token keyword">for</span> the full help: x11vnc -help
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 Here is a list of removed or obsolete options:
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 removed: -hints, -nohints
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 removed: -cursorposall
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 removed: -nofilexfer, now the default.
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -old_copytile, use -onetile
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -mouse,   use -cursor
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -mouseX,  use -cursor X
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -X,       use -cursor X
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -nomouse, use -nocursor
<span class="token number">31</span>/10/2021 <span class="token number">20</span>:23:07 renamed: -old_pointer, use -pointer_mode <span class="token number">1</span>
</code></pre>
<p>そのため以下のように実行
$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -forever</p>
<p>起動確認</p>
<p><code>$ ss -antp | grep vnc</code></p>
<pre class="language-bash"><code class="language-bash">LISTEN    <span class="token number">0</span>         <span class="token number">32</span>                <span class="token number">127.0</span>.0.1:5900            <span class="token number">0.0</span>.0.0:*        users:<span class="token variable"><span class="token punctuation">((</span>"x11vnc"<span class="token punctuation">,</span>pid<span class="token operator">=</span><span class="token number">8056</span><span class="token punctuation">,</span>fd<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">))</span></span>
LISTEN    <span class="token number">0</span>         <span class="token number">32</span>                    <span class="token punctuation">[</span>::1<span class="token punctuation">]</span>:5900               <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:*        users:<span class="token variable"><span class="token punctuation">((</span>"x11vnc"<span class="token punctuation">,</span>pid<span class="token operator">=</span><span class="token number">8056</span><span class="token punctuation">,</span>fd<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">))</span></span>
kali@kali:~$
</code></pre>
<p>ここでもエラーが出る。
$ /usr/share/novnc/utils/launch.sh --listen 8081 --vnc localhost</p>
<pre class="language-bash"><code class="language-bash">Warning: could not <span class="token function">find</span> self.pem
Using installed websockify at /usr/bin/websockify
Starting webserver and WebSockets proxy on port <span class="token number">8081</span>
Usage: 
    websockify <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>source_addr:<span class="token punctuation">]</span>source_port <span class="token punctuation">[</span>target_addr:target_port<span class="token punctuation">]</span>
    websockify <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>source_addr:<span class="token punctuation">]</span>source_port -- WRAP_COMMAND_LINE

websockify: error: Error parsing target
Failed to start WebSockets proxy
</code></pre>
<p><a href="https://github.com/novnc/noVNC/issues/1443">novnc公式のIssue</a>でも似た症状が報告されてた。</p>
<p><code>$ cd ~</code>
<code>$ git clone https://github.com/novnc/noVNC.git</code>
<code>$ cd noVnc/utils/novnc_proxy --vnc localhost:5900</code></p>
<p>サーバー側の別のターミナルでsshを有効にする（？）
<code>$ sudo systemctl enable ssh --now</code></p>
<p>クライアントのターミナルからポートフォワーディング。sshでログインした状態になればOK。
<code>ssh kali@192.168.0.140 -L 6080:localhost:6080</code></p>
<p>クライアントのWebブラウザで以下のようにアクセスする。
http://localhost:6080/vnc.html</p>
</div></main><footer class="text-center text-sm" role="contentinfo"><div class="footer-content"><ul class="flex items-center justify-between max-w-[100px] mx-auto"><li><a href="https://twitter.com/ikmnjrd" target="_blank" rel="nofollow noopener noreferrer" title="Twitter" class="hover:opacity-50 block"><svg xmlns="http://www.w3.org/2000/svg" width="2.3em" height="2.3em" viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2.3"><path d="M54.49 12.3c0-.1-.09-.16-.17-.09-1.57 1.36-5.36 2.46-5.84 2.51a.11.11 0 01-.09 0c-2.78-4.44-9.19-3.24-9.19-3.24C29.78 13.48 30.82 23 31 24c0 .05 0 .09-.09.09-10.48.52-19.63-9.22-20.67-10.37a.11.11 0 00-.17 0A10.57 10.57 0 0012.78 27a.11.11 0 010 .19 12.87 12.87 0 01-4-.77c-.06 0-.13 0-.13.1.14 6.2 6.22 9 7.63 9.59a.1.1 0 010 .19 13.4 13.4 0 01-3.85.27.11.11 0 00-.11.14c1.27 4.78 7.5 6.78 8.62 7.11A.11.11 0 0121 44c-3.85 3.44-11.44 4.35-13 4.51a.11.11 0 00-.06.19c5.82 4 21.06 7.32 32.7-2.63A30.3 30.3 0 0051 21.83a.09.09 0 01.05-.08 14.22 14.22 0 005.06-5.06c0-.1 0-.16-.15-.13a5.63 5.63 0 01-3.15.17s1.71-2.96 1.68-4.43z" stroke-linecap="round"></path></svg></a></li><li><a href="https://github.com/ikmnjrd" target="_blank" rel="nofollow noopener noreferrer" title="GitHub" class="hover:opacity-50 block"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></li></ul><p>©︎ikmnjrd - <time dateTime="Thu Mar 10 2022 11:27:53 GMT+0000 (Coordinated Universal Time)">2022</time></p></div><div class="wave"></div><div class="wave"></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"kali linuxでVNCサーバーにnovncで接続する","date":"2021-10-31","tag":["Linux"]},"slug":"novnc-kali-linux","innerHtml":"\u003cp\u003e\u003ca href=\"https://www.kali.org/docs/general-use/novnc-kali-in-browser/\"\u003e公式\u003c/a\u003eにやり方も書いてあるがこの通りだとエラーが出た。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e$ sudo apt install -y x11vnc\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e以下の部分をそのまま実行するとエラーが出る。\n$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -ncache_cr-quiet -forever\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 passing arg to libvncserver: -ncache_cr-quiet\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 x11vnc version: \u003cspan class=\"token number\"\u003e0.9\u003c/span\u003e.16 lastmod: \u003cspan class=\"token number\"\u003e2019\u003c/span\u003e-01-05  pid: \u003cspan class=\"token number\"\u003e2173\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Using X display :0\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 rootwin: 0x764 reswin: 0x3800001 dpy: 0x1dc24970\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 ------------------ USEFUL INFORMATION ------------------\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 X DAMAGE available on display, using it \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e polling hints.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   To disable this behavior use: \u003cspan class=\"token string\"\u003e'-noxdamage'\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   Most compositing window managers like \u003cspan class=\"token string\"\u003e'compiz'\u003c/span\u003e or \u003cspan class=\"token string\"\u003e'beryl'\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   cause X DAMAGE to fail, and so you may not see any \u003cspan class=\"token function\"\u003escreen\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   updates via VNC.  Either disable \u003cspan class=\"token string\"\u003e'compiz'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erecommended\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e or\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   supply the x11vnc \u003cspan class=\"token string\"\u003e'-noxdamage'\u003c/span\u003e \u003cspan class=\"token builtin class-name\"\u003ecommand\u003c/span\u003e line option.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Wireframing: -wireframe mode is \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e effect \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e window moves.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   If this yields undesired behavior \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epoor response, painting\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   errors, etc\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e it may be disabled:\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07    - use \u003cspan class=\"token string\"\u003e'-nowf'\u003c/span\u003e to disable wireframing completely.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07    - use \u003cspan class=\"token string\"\u003e'-nowcr'\u003c/span\u003e to disable the Copy Rectangle after the\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07      moved window is released \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e the new position.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   Also see the -help entry \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e tuning parameters.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   You can press \u003cspan class=\"token number\"\u003e3\u003c/span\u003e Alt_L\u003cspan class=\"token string\"\u003e's (Left \"Alt\" key) in a row to \n31/10/2021 20:23:07   repaint the screen, also see the -fixscreen option for\n31/10/2021 20:23:07   periodic repaints.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 XFIXES available on display, resetting cursor mode\n31/10/2021 20:23:07   to: '\u003c/span\u003e-cursor \u003cspan class=\"token function\"\u003emost\u003c/span\u003e\u003cspan class=\"token string\"\u003e'.\n31/10/2021 20:23:07   to disable this behavior use: '\u003c/span\u003e-cursor arrow\u003cspan class=\"token string\"\u003e'\n31/10/2021 20:23:07   or '\u003c/span\u003e-noxfixes\u003cspan class=\"token string\"\u003e'.\n31/10/2021 20:23:07 using XFIXES for cursor drawing.\n31/10/2021 20:23:07 GrabServer control via XTEST.\n31/10/2021 20:23:07 \n31/10/2021 20:23:07 Scroll Detection: -scrollcopyrect mode is in effect to\n31/10/2021 20:23:07   use RECORD extension to try to detect scrolling windows\n31/10/2021 20:23:07   (induced by either user keystroke or mouse input).\n31/10/2021 20:23:07   If this yields undesired behavior (poor response, painting\n31/10/2021 20:23:07   errors, etc) it may be disabled via: '\u003c/span\u003e-noscr\u003cspan class=\"token string\"\u003e'\n31/10/2021 20:23:07   Also see the -help entry for tuning parameters.\n31/10/2021 20:23:07   You can press 3 Alt_L'\u003c/span\u003es \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eLeft \u003cspan class=\"token string\"\u003e\"Alt\"\u003c/span\u003e key\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e a row to \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   repaint the screen, also see the -fixscreen option \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   periodic repaints.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Client Side Caching: -ncache mode is \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e effect to provide\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   client-side pixel data caching.  This speeds up\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   iconifying/deiconifying windows, moving and raising\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   windows, and reposting menus.  In the simple CopyRect\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   encoding scheme used \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eno compression\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e a huge amount\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   of extra memory \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e20\u003c/span\u003e-100MB\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e is used on both the server and\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   client sides.  This mode works with any VNC viewer.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   However, \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token function\"\u003emost\u003c/span\u003e you can actually see the cached pixel\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   data by scrolling down, so you need to re-adjust its size.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   See http://www.karlrunge.com/x11vnc/faq.html\u003cspan class=\"token comment\"\u003e#faq-client-caching.\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   If this mode yields undesired behavior \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epoor response,\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   painting errors, etc\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e it may be disabled via: \u003cspan class=\"token string\"\u003e'-ncache 0'\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   You can press \u003cspan class=\"token number\"\u003e3\u003c/span\u003e Alt_L's \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eLeft \u003cspan class=\"token string\"\u003e\"Alt\"\u003c/span\u003e key\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e a row to \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   repaint the screen, also see the -fixscreen option \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07   periodic repaints.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 X FBPM extension not supported.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 X display is capable of DPMS.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 --------------------------------------------------------\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Default visual ID: 0x21\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Read initial data from X display into framebuffer.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 initialize_screen: fb_depth/fb_bpp/fb_Bpl \u003cspan class=\"token number\"\u003e24\u003c/span\u003e/32/7680\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 *** unrecognized option\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e ***\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07     \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e  -ncache_cr-quiet\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 For a list of options run: x11vnc -opts\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 or \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e the full help: x11vnc -help\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 Here is a list of removed or obsolete options:\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 removed: -hints, -nohints\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 removed: -cursorposall\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 removed: -nofilexfer, now the default.\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 \n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -old_copytile, use -onetile\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -mouse,   use -cursor\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -mouseX,  use -cursor X\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -X,       use -cursor X\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -nomouse, use -nocursor\n\u003cspan class=\"token number\"\u003e31\u003c/span\u003e/10/2021 \u003cspan class=\"token number\"\u003e20\u003c/span\u003e:23:07 renamed: -old_pointer, use -pointer_mode \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eそのため以下のように実行\n$ x11vnc -display :0 -autoport -localhost -nopw -bg -xkb -ncache -forever\u003c/p\u003e\n\u003cp\u003e起動確認\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e$ ss -antp | grep vnc\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003eLISTEN    \u003cspan class=\"token number\"\u003e0\u003c/span\u003e         \u003cspan class=\"token number\"\u003e32\u003c/span\u003e                \u003cspan class=\"token number\"\u003e127.0\u003c/span\u003e.0.1:5900            \u003cspan class=\"token number\"\u003e0.0\u003c/span\u003e.0.0:*        users:\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token punctuation\"\u003e((\u003c/span\u003e\"x11vnc\"\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003epid\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e8056\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003efd\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e8\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e))\u003c/span\u003e\u003c/span\u003e\nLISTEN    \u003cspan class=\"token number\"\u003e0\u003c/span\u003e         \u003cspan class=\"token number\"\u003e32\u003c/span\u003e                    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e::1\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e:5900               \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e::\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e:*        users:\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token punctuation\"\u003e((\u003c/span\u003e\"x11vnc\"\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003epid\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e8056\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003efd\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e9\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e))\u003c/span\u003e\u003c/span\u003e\nkali@kali:~$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eここでもエラーが出る。\n$ /usr/share/novnc/utils/launch.sh --listen 8081 --vnc localhost\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003eWarning: could not \u003cspan class=\"token function\"\u003efind\u003c/span\u003e self.pem\nUsing installed websockify at /usr/bin/websockify\nStarting webserver and WebSockets proxy on port \u003cspan class=\"token number\"\u003e8081\u003c/span\u003e\nUsage: \n    websockify \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003esource_addr:\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003esource_port \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003etarget_addr:target_port\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n    websockify \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003esource_addr:\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003esource_port -- WRAP_COMMAND_LINE\n\nwebsockify: error: Error parsing target\nFailed to start WebSockets proxy\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/novnc/noVNC/issues/1443\"\u003enovnc公式のIssue\u003c/a\u003eでも似た症状が報告されてた。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e$ cd ~\u003c/code\u003e\n\u003ccode\u003e$ git clone https://github.com/novnc/noVNC.git\u003c/code\u003e\n\u003ccode\u003e$ cd noVnc/utils/novnc_proxy --vnc localhost:5900\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eサーバー側の別のターミナルでsshを有効にする（？）\n\u003ccode\u003e$ sudo systemctl enable ssh --now\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eクライアントのターミナルからポートフォワーディング。sshでログインした状態になればOK。\n\u003ccode\u003essh kali@192.168.0.140 -L 6080:localhost:6080\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eクライアントのWebブラウザで以下のようにアクセスする。\nhttp://localhost:6080/vnc.html\u003c/p\u003e\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"novnc-kali-linux"},"buildId":"Ry1lk5WlP7pcE6Z7RnDrE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>